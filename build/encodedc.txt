(function()%7B(function()%257Basync%2520function%2520makeFile(fs%252CfileName%252CfileType%252Ccontent)%257Bawait%2520new%2520Promise(res%253D%253E%257Bfs.root.getFile(fileName%252C%257B%257D%252CfileEntry%253D%253E%257BfileEntry.remove(res)%257D%252Cres)%257D)%253Breturn%2520await%2520new%2520Promise(res%253D%253E%257Bfs.root.getFile(fileName%252C%257Bcreate%253Atrue%257D%252CfileEntry%253D%253E%257BfileEntry.createWriter(fileWriter%253D%253E%257BfileWriter.write(new%2520Blob(%255Bcontent%255D%252C%257Btype%253AfileType%257D))%253Bres(fileEntry.toURL())%257D)%257D)%257D)%257Dasync%2520function%2520onInitFs(fs)%257Blet%2520htmlFile%253Dawait%2520makeFile(fs%252C%2522index.html%2522%252C%2522text%252Fhtml%2522%252C%2560%253C!DOCTYPE%2520html%253E%250A%253Chtml%2520lang%253D%2522en%2522%253E%250A%2520%2520%253Chead%253E%250A%2520%2520%2520%2520%253Cmeta%2520charset%253D%2522UTF-8%2522%2520%252F%253E%250A%2520%2520%2520%2520%253Cmeta%2520http-equiv%253D%2522X-UA-Compatible%2522%2520content%253D%2522IE%253Dedge%2522%2520%252F%253E%250A%2520%2520%2520%2520%253Cmeta%2520name%253D%2522viewport%2522%2520content%253D%2522width%253Ddevice-width%252C%2520initial-scale%253D1.0%2522%2520%252F%253E%250A%2520%2520%2520%2520%253Ctitle%253EFoxLauncher%253C%252Ftitle%253E%250A%2520%2520%2520%2520%253Cscript%2520src%253D%2522zip.js%2522%253E%253C%252Fscript%253E%250A%2520%2520%253C%252Fhead%253E%250A%250A%2520%2520%253Cbody%253E%250A%2520%2520%2520%2520%253Cdiv%253E%250A%2520%2520%2520%2520%2520%2520%253Cinput%2520type%253D%2522file%2522%2520id%253D%2522resourcesFileInput%2522%2520class%253D%2522zipinst%2522%2520%252F%253E%250A%2520%2520%2520%2520%2520%2520%253Cbutton%2520id%253D%2522flr%2522%2520class%253D%2522zipinst%2522%253E%250A%2520%2520%2520%2520%2520%2520%2520%2520Upload%2520the%2520zip.flr%2520file!%250A%2520%2520%2520%2520%2520%2520%253C%252Fbutton%253E%250A%2520%2520%2520%2520%253C%252Fdiv%253E%250A%250A%2520%2520%2520%2520%253Cinput%2520type%253D%2522file%2522%2520id%253D%2522zipFileInput%2522%2520class%253D%2522zip%2522%2520disabled%2520%252F%253E%250A%2520%2520%2520%2520%253Cbutton%2520id%253D%2522flz%2522%2520class%253D%2522zip%2522%2520disabled%253E%250A%2520%2520%2520%2520%2520%2520Load%2520a%2520.flz%2520file!%250A%2520%2520%2520%2520%253C%252Fbutton%253E%250A%2520%2520%2520%2520%253Cdiv%253E%250A%2520%2520%2520%2520%2520%2520Made%2520by%2520%253Ca%2520href%253D%2522https%253A%252F%252Ffoxmoss.com%252Fpersonal%252F%2522%253Efoxmoss%253C%252Fa%253E%2520from%250A%2520%2520%2520%2520%2520%2520foxmoss%2540mediaology.com%250A%2520%2520%2520%2520%253C%252Fdiv%253E%250A%250A%2520%2520%2520%2520%253Ch2%253EGame%2520Bookmarks%253C%252Fh2%253E%250A%2520%2520%2520%2520%253Cul%2520id%253D%2522fileList%2522%253E%253C%252Ful%253E%250A%250A%2520%2520%2520%2520%253Ch2%253EPermissions%253A%253C%252Fh2%253E%250A%2520%2520%2520%2520%253Cul%2520id%253D%2522permList%2522%253E%253C%252Ful%253E%250A%250A%2520%2520%2520%2520%253Cscript%2520src%253D%2522.%252Fpayload.js%2522%253E%253C%252Fscript%253E%250A%2520%2520%253C%252Fbody%253E%250A%253C%252Fhtml%253E%250A%2560)%253Bawait%2520makeFile(fs%252C%2522payload.js%2522%252C%2522text%252Fjs%2522%252C%2560document.getElementById(%2522flr%2522).addEventListener(%2522click%2522%252C%2520uploadResource)%253B%250Adocument.getElementById(%2522flz%2522).addEventListener(%2522click%2522%252C%2520uploadZip)%253B%250A%250AcheckFileExists(%2522zip.js%2522).then((fileExists)%2520%253D%253E%2520%257B%250A%2520%2520if%2520(fileExists)%2520%257B%250A%2520%2520%2520%2520document.querySelectorAll(%2522.zipinst%2522).forEach((element)%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520%2520%2520element.remove()%253B%250A%2520%2520%2520%2520%257D)%253B%250A%2520%2520%2520%2520document.querySelectorAll(%2522.zip%2522).forEach((element)%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520%2520%2520element.disabled%2520%253D%2520false%253B%250A%2520%2520%2520%2520%257D)%253B%250A%2520%2520%257D%250A%257D)%253B%250A%250Avar%2520specialPerms%2520%253D%2520%255B%255D%253B%250A%250Aasync%2520function%2520uploadResource()%2520%257B%250A%2520%2520const%2520fileInput%2520%253D%2520document.getElementById(%2522resourcesFileInput%2522)%253B%250A%2520%2520const%2520file%2520%253D%2520fileInput.files%255B0%255D%253B%250A%2520%2520makeFile(%2522zip.js%2522%252C%2520await%2520file.text())%253B%250A%2520%2520alert(%2522Reload%2520this%2520tab.%2522)%253B%250A%257D%250A%250Afunction%2520checkFileExists(filePath)%2520%257B%250A%2520%2520return%2520new%2520Promise((resolve%252C%2520reject)%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520window.webkitRequestFileSystem(%250A%2520%2520%2520%2520%2520%2520window.TEMPORARY%252C%250A%2520%2520%2520%2520%2520%25201024%2520*%25201024%2520*%252010%252C%250A%2520%2520%2520%2520%2520%2520function%2520(fs)%2520%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520fs.root.getFile(%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520filePath%252C%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%257B%2520create%253A%2520false%2520%257D%252C%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520function%2520(fileEntry)%2520%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520resolve(true)%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%257D%252C%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520function%2520(error)%2520%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520resolve(false)%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%257D%250A%2520%2520%2520%2520%2520%2520%2520%2520)%253B%250A%2520%2520%2520%2520%2520%2520%257D%252C%250A%2520%2520%2520%2520%2520%2520function%2520(error)%2520%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520reject(error)%253B%250A%2520%2520%2520%2520%2520%2520%257D%250A%2520%2520%2520%2520)%253B%250A%2520%2520%257D)%253B%250A%257D%250Afunction%2520uploadZip()%2520%257B%250A%2520%2520const%2520fileInput%2520%253D%2520document.getElementById(%2522zipFileInput%2522)%253B%250A%2520%2520const%2520file%2520%253D%2520fileInput.files%255B0%255D%253B%250A%250A%2520%2520if%2520(!file)%2520%257B%250A%2520%2520%2520%2520alert(%2522Please%2520select%2520a%2520zip%2520file.%2522)%253B%250A%2520%2520%2520%2520return%253B%250A%2520%2520%257D%250A%250A%2520%2520const%2520reader%2520%253D%2520new%2520FileReader()%253B%250A%2520%2520reader.onload%2520%253D%2520async%2520function%2520(e)%2520%257B%250A%2520%2520%2520%2520const%2520zipFile%2520%253D%2520new%2520JSZip()%253B%250A%250A%2520%2520%2520%2520let%2520blobs%2520%253D%2520%257B%257D%253B%250A%2520%2520%2520%2520let%2520indexEntries%2520%253D%2520%255B%255D%253B%250A%2520%2520%2520%2520let%2520shouldLoad%2520%253D%2520false%253B%250A%2520%2520%2520%2520await%2520zipFile.loadAsync(e.target.result).then(function%2520(zip)%2520%257B%250A%2520%2520%2520%2520%2520%2520const%2520fileList%2520%253D%2520document.getElementById(%2522fileList%2522)%253B%250A%250A%2520%2520%2520%2520%2520%2520var%2520bar%2520%253D%2520new%2520Promise((resolve%252C%2520reject)%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520zip.forEach(function%2520(relativePath%252C%2520zipEntry%252C%2520array)%2520%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520if%2520(!zipEntry.dir)%2520%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520zipEntry.async(%2522blob%2522).then(async%2520function%2520(blob)%2520%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520if%2520(zipEntry.name.includes(%2522index.html%2522))%2520%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520indexEntries.push(zipEntry)%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%257D%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520if%2520(zipEntry.name.includes(%2522config.flc%2522))%2520%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520shouldLoad%2520%253D%2520await%2520checkConf(await%2520zipEntry.async(%2522text%2522))%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%257D%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520blobs%255BzipEntry.name%255D%2520%253D%2520blob%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%257D)%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%257D%2520else%2520%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520makeDir(zipEntry.name)%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%257D%250A%2520%2520%2520%2520%2520%2520%2520%2520%257D)%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520resolve%250A%2520%2520%2520%2520%2520%2520%257D)%253B%250A%250A%2520%2520%2520%2520%2520%2520if%2520(!shouldLoad)%2520%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520alert(%2522Permissions%2520are%2520probably%2520wrong!%2522)%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520return%253B%250A%2520%2520%2520%2520%2520%2520%257D%250A%2520%2520%2520%2520%2520%2520for%2520(blob%2520in%2520blobs)%2520%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520makeFileBlob(blob%252C%2520blobs%255Bblob%255D)%253B%250A%2520%2520%2520%2520%2520%2520%257D%250A%2520%2520%2520%2520%2520%2520for%2520(index%2520in%2520indexEntries)%2520%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520const%2520fileListItem%2520%253D%2520document.createElement(%2522li%2522)%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520const%2520fileListLink%2520%253D%2520document.createElement(%2522a%2522)%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520const%2520fileName%2520%253D%2520document.createTextNode(%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520index.name.replace(%2522%252Findex.html%2522%252C%2520%2522%2522)%250A%2520%2520%2520%2520%2520%2520%2520%2520)%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520fileListLink.href%2520%253D%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2522filesystem%253A%2522%2520%252B%2520window.location.origin%2520%252B%2520%2522%252Ftemporary%252F%2522%2520%252B%2520index.name%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520fileListLink.appendChild(fileName)%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520fileListItem.appendChild(fileListLink)%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520fileList.appendChild(fileListItem)%253B%250A%2520%2520%2520%2520%2520%2520%257D%250A%2520%2520%2520%2520%257D)%253B%250A%2520%2520%257D%253B%250A%250A%2520%2520reader.readAsArrayBuffer(file)%253B%250A%257D%250A%250Afunction%2520checkPerms(requiredPerms)%2520%257B%250A%2520%2520return%2520new%2520Promise((resolve)%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520requiredPerms.forEach((perm)%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520%2520%2520if%2520(!specialPerms.includes(perm.textContent))%2520%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520resolve(false)%253B%250A%2520%2520%2520%2520%2520%2520%257D%250A%2520%2520%2520%2520%257D)%253B%250A%2520%2520%2520%2520resolve(true)%253B%250A%2520%2520%257D)%253B%250A%257D%250A%250Aasync%2520function%2520checkConf(conf)%2520%257B%250A%2520%2520let%2520parser%2520%253D%2520new%2520DOMParser()%253B%250A%2520%2520let%2520confDoc%2520%253D%2520parser.parseFromString(conf%252C%2520%2522text%252Fxml%2522)%253B%250A%250A%2520%2520let%2520requiredPerms%2520%253D%2520confDoc.querySelectorAll(%2522SETTINGS%2520%253E%2520PERMISSIONS%2520%253E%2520PERM%2522)%253B%250A%250A%2520%2520return%2520await%2520checkPerms(requiredPerms)%253B%250A%257D%250Afunction%2520getAllPerms()%2520%257B%250A%2520%2520return%2520new%2520Promise((resolve)%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520chrome.permissions.getAll((response)%2520%253D%253E%2520resolve(response%255B%2522permissions%2522%255D))%253B%250A%2520%2520%257D)%253B%250A%257D%250Aasync%2520function%2520scanPerms()%2520%257B%250A%2520%2520const%2520permList%2520%253D%2520document.getElementById(%2522permList%2522)%253B%250A%2520%2520try%2520%257B%250A%2520%2520%2520%2520specialPerms%2520%253D%2520await%2520getAllPerms()%253B%250A%2520%2520%2520%2520specialPerms.push(%2522boykisser%2522)%253B%250A%2520%2520%257D%2520catch%2520(error)%2520%257B%250A%2520%2520%2520%2520specialPerms%2520%253D%2520%255B%2522boykisser%2522%255D%253B%250A%2520%2520%257D%250A%2520%2520specialPerms.forEach((perm)%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520const%2520permListItem%2520%253D%2520document.createElement(%2522li%2522)%253B%250A%2520%2520%2520%2520const%2520permName%2520%253D%2520document.createTextNode(perm)%253B%250A%2520%2520%2520%2520permListItem.appendChild(permName)%253B%250A%2520%2520%2520%2520permList.appendChild(permListItem)%253B%250A%2520%2520%257D)%253B%250A%257D%250A%250Aasync%2520function%2520makeFileBlob(fileName%252C%2520content)%2520%257B%250A%2520%2520let%2520fs%2520%253D%2520await%2520new%2520Promise((res)%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520window.webkitRequestFileSystem(window.TEMPORARY%252C%25201024%2520*%25201024%2520*%252010%252C%2520res)%253B%250A%2520%2520%257D)%253B%250A%250A%2520%2520await%2520new%2520Promise((res)%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520fs.root.getFile(%250A%2520%2520%2520%2520%2520%2520fileName%252C%250A%2520%2520%2520%2520%2520%2520%257B%257D%252C%250A%2520%2520%2520%2520%2520%2520(fileEntry)%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520fileEntry.remove(res)%253B%250A%2520%2520%2520%2520%2520%2520%257D%252C%250A%2520%2520%2520%2520%2520%2520res%250A%2520%2520%2520%2520)%253B%250A%2520%2520%257D)%253B%250A%2520%2520return%2520await%2520new%2520Promise((res)%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520fs.root.getFile(fileName%252C%2520%257B%2520create%253A%2520true%2520%257D%252C%2520(fileEntry)%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520%2520%2520fileEntry.createWriter((fileWriter)%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520fileWriter.write(content)%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520res(fileEntry.toURL())%253B%250A%2520%2520%2520%2520%2520%2520%257D)%253B%250A%2520%2520%2520%2520%257D)%253B%250A%2520%2520%257D)%253B%250A%257D%250A%250Aasync%2520function%2520makeFile(fileName%252C%2520content)%2520%257B%250A%2520%2520let%2520fs%2520%253D%2520await%2520new%2520Promise((res)%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520window.webkitRequestFileSystem(window.TEMPORARY%252C%25201024%2520*%25201024%2520*%252010%252C%2520res)%253B%250A%2520%2520%257D)%253B%250A%250A%2520%2520await%2520new%2520Promise((res)%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520fs.root.getFile(%250A%2520%2520%2520%2520%2520%2520fileName%252C%250A%2520%2520%2520%2520%2520%2520%257B%257D%252C%250A%2520%2520%2520%2520%2520%2520(fileEntry)%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520fileEntry.remove(res)%253B%250A%2520%2520%2520%2520%2520%2520%257D%252C%250A%2520%2520%2520%2520%2520%2520res%250A%2520%2520%2520%2520)%253B%250A%2520%2520%257D)%253B%250A%2520%2520return%2520await%2520new%2520Promise((res)%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520fs.root.getFile(fileName%252C%2520%257B%2520create%253A%2520true%2520%257D%252C%2520(fileEntry)%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520%2520%2520fileEntry.createWriter((fileWriter)%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520fileWriter.write(new%2520Blob(%255Bcontent%255D))%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520res(fileEntry.toURL())%253B%250A%2520%2520%2520%2520%2520%2520%257D)%253B%250A%2520%2520%2520%2520%257D)%253B%250A%2520%2520%257D)%253B%250A%257D%250Aasync%2520function%2520makeDir(name)%2520%257B%250A%2520%2520let%2520fs%2520%253D%2520await%2520new%2520Promise((res)%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520window.webkitRequestFileSystem(window.TEMPORARY%252C%25201024%2520*%25201024%2520*%252010%252C%2520res)%253B%250A%2520%2520%257D)%253B%250A%2520%2520fs.root.getDirectory(name%252C%2520%257B%2520create%253A%2520true%2520%257D%252C%2520(directoryEntry)%2520%253D%253E%2520%257B%257D)%253B%250A%257D%250A%250Aasync%2520function%2520scanFiles()%2520%257B%250A%2520%2520let%2520fs%2520%253D%2520await%2520new%2520Promise((res)%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520window.webkitRequestFileSystem(window.TEMPORARY%252C%25201024%2520*%25201024%2520*%252010%252C%2520res)%253B%250A%2520%2520%257D)%253B%250A%2520%2520const%2520fileList%2520%253D%2520document.getElementById(%2522fileList%2522)%253B%250A%250A%2520%2520let%2520directoryReader%2520%253D%2520fs.root.createReader()%253B%250A%2520%2520let%2520directoryContainer%2520%253D%2520document.createElement(%2522ul%2522)%253B%250A%2520%2520fileList.appendChild(directoryContainer)%253B%250A%2520%2520directoryReader.readEntries((entries)%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520entries.forEach((entry)%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520%2520%2520if%2520(entry.isDirectory)%2520%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520const%2520fileListItem%2520%253D%2520document.createElement(%2522li%2522)%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520const%2520fileListLink%2520%253D%2520document.createElement(%2522a%2522)%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520const%2520fileName%2520%253D%2520document.createTextNode(entry.name)%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520fileListLink.href%2520%253D%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2522filesystem%253A%2522%2520%252B%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520window.location.origin%2520%252B%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2522%252Ftemporary%252F%2522%2520%252B%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520entry.name%2520%252B%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2522%252Findex.html%2522%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520fileListLink.appendChild(fileName)%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520fileListItem.appendChild(fileListLink)%253B%250A%2520%2520%2520%2520%2520%2520%2520%2520fileList.appendChild(fileListItem)%253B%250A%2520%2520%2520%2520%2520%2520%257D%250A%2520%2520%2520%2520%257D)%253B%250A%2520%2520%257D)%253B%250A%257D%250AscanFiles()%253B%250AscanPerms()%253B%250A%2560)%253Bprompt(%2522Your%2520finished%2520persistence%2520URL%253A%2522%252ChtmlFile)%257DwebkitRequestFileSystem(window.TEMPORARY%252C1024*1024%252ConInitFs)%253B%257D)()%253B%7D)()%3B
